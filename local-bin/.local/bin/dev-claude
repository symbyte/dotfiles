#!/bin/bash
# dev-claude - Wrapper for claude in the dev zellij layout
#
# Ensures the worktree exists for the session, then launches claude.
# Detects PR status and runs appropriate command.

# Ensure worktree exists and get the path
source ~/.local/bin/dev-ensure-worktree
dev_setup_worktree

cd "$DEV_WORKTREE_PATH" || exit 1

if gh pr view --json number &>/dev/null; then
    # PR exists - resume most recent session
    exec claude --dangerously-skip-permissions --resume
else
    # No PR - start planning the issue
    exec claude --dangerously-skip-permissions /plan-issue
fi
